<!-- CALENDAR NAVIGATION BAR — TENET-COMPLIANT, NO INLINE JS/CSS -->
<nav id="calendar-nav" class="bg-black border-b-4 border-yellow-400 p-6 sticky top-0 z-40 shadow-2xl">
  <div class="max-w-7xl mx-auto flex flex-wrap items-center justify-between gap-4">
    <div class="flex items-center gap-8 text-2xl font-black">
      <button data-view="year"   class="nav-btn text-yellow-400 hover:text-white transition">{{ year }}</button>
      <span class="text-gray-600">/</span>
      <button data-view="quarter" class="nav-btn text-yellow-400 hover:text-white transition">
        Q{{ ((month-1)//3)+1 }}
      </button>
      <span class="text-gray-600">/</span>
      <button data-view="month"   class="nav-btn text-yellow-400 hover:text-white transition">
        {{ "%02d"|format(month) }} {{ month|month_name }}
      </button>
      <span class="text-gray-600">/</span>
      <button data-view="week"    class="nav-btn text-yellow-400 hover:text-white transition">Week</button>
      <span class="text-gray-600">/</span>
      <button data-view="day"     class="nav-btn text-yellow-400 hover:text-white transition">
        {{ "%02d"|format(day) }}
      </button>
    </div>

    <div class="flex gap-4">
      <button id="nav-today" class="bg-yellow-500 hover:bg-yellow-400 text-black font-bold py-3 px-8 rounded-lg shadow-lg transition-all hover:scale-105">
        TODAY
      </button>
      <!-- SMART ICS SYNC BUTTON — USES CURRENT DATE + YOUR EXISTING datestr LOGIC -->
      <a href="{{ url_for('calendar.import_calendar', datestr=year ~ '%02d'|format(month) ~ '%02d'|format(day)) }}"
        class="bg-purple-600 hover:bg-purple-500 text-white font-black py-3 px-8 rounded-lg shadow-2xl transition-all hover:scale-105 flex items-center gap-3 text-lg">
        <span class="text-2xl">SYNC THIS DAY</span>
      </a>
    </div>
  </div>
</nav>