{# templates/calendar/day.html — FINAL DAILY PAGE LAYOUT ASSEMBLY — PROJECT.MD COMPLETE #}
<div class="max-w-7xl mx-auto">
  <h2 class="text-6xl font-black text-gold mb-8 text-center drop-shadow-lg">
    {{ month|month_name }} {{ day }}, {{ year }}
  </h2>

  <!-- 2. ICS EVENTS + 3. 38-ROW GRID -->
  <div class="mt-24 grid grid-cols-1 lg:grid-cols-4 gap-16">
    <!-- LEFT: TIME GRID WITH EVENTS -->
    <div class="lg:col-span-3">
        <!-- LEFT + RIGHT TIME GRID — PERFECT ALIGNMENT, HOVER TIME, NO SPACER -->
        <div class="grid grid-cols-12 gap-0 border-4 border-yellow-400 rounded-xl overflow-hidden shadow-heavy bg-black">
          <!-- LEFT: TIME LABELS — NO SPACER! -->
          <div class="col-span-1 bg-dark">
            {% for slot in range(38) %}
              {% set hour = 5 + (slot // 2) %}
              {% set minute = (slot % 2) * 30 %}
              {% set hour_12 = ((hour - 1) % 12) + 1 %}
              {% set am_pm = 'AM' if hour < 12 else 'PM' %}

              <div class="h-32 border-b border-gray-700 flex items-center justify-end pr-5"> 
                {% if minute == 0 %}
                  <span class="text-gold text-lg">{{ "%d:00"|format(hour_12) }}</span>
                  <span class="text-gold text-sm ml-2">{{ am_pm }}</span>
                {% else %}
                  <span class="text-gray-500 text-lg">{{ "%d:%02d"|format(hour_12, minute) }}</span>
                {% endif %}
              </div>
            {% endfor %}
          </div>

          <!-- RIGHT: 38 TIME SLOTS — HOVER TIME + PERFECT ALIGNMENT -->
          <div class="col-span-11 bg-gray-950">
            <div class="grid grid-rows-38 h-full">
              {% for slot in range(38) %}
                {% set hour = 5 + (slot // 2) %}
                {% set minute = (slot % 2) * 30 %}
                {% set hour_12 = ((hour - 1) % 12) + 1 %}
                {% set am_pm = 'AM' if hour < 12 else 'PM' %}

                <div class="border-b border-gray-700 relative group cursor-pointer">
                  <!-- Full-cell hover -->
                  <div class="absolute inset-0 hover:bg-yellow-900/30 transition-all"></div>
                  
                  <!-- HOVER TIME — BIG AND CENTERED -->
                  <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none">
                    <span class="text-2xl font-black text-gold drop-shadow-lg">
                      {{ "%d:%02d %s"|format(hour_12, minute, am_pm) }}
                    </span>
                  </div>
                </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- RIGHT: GOALS + TASKS KANBAN -->
    <div class="space-y-20">
      <!-- GOALS KANBAN -->
      <div class="bg-dark border-4 border-cyan-500 rounded-2xl pad-xl shadow-heavy">
        <h3 class="text-4xl font-black text-cyan-400 mb-6">TODAY'S GOALS</h3>
        <div id="today-goals-kanban" class="space-y-4">
          <!-- JS will populate -->
          <p class="text-gray-500 text-center">Loading today's goals...</p>
        </div>
      </div>

      <!-- TASKS KANBAN -->
      <div class="bg-dark border-4 border-orange-500 rounded-2xl pad-xl shadow-heavy">
        <h3 class="text-4xl font-black text-orange-400 mb-6">TODAY'S TASKS</h3>
        <div id="today-tasks-kanban" class="space-y-4">
          <p class="text-gray-500 text-center">Loading today's tasks...</p>
        </div>
      </div>
    </div>
  </div>
</div>